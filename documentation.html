<div id="content"><p><h1>SVG-Like Program For JS13k</h1><hr><br>This is a simple function developed to draw little SVG-like drawings through the html canvas 2d context (ctx). It takes in <b>2</b> parameters like so: <code>svg("svg-data",[xPos,yPos,xScale,yScale])</code><br><ul><li><code>svg-data</code> is a string that contains all the instructions for the drawing program</li><li><code>xPos</code> &amp; <code>yPos</code> is where your drawing is being drawn</li><li><code>xScale</code> &amp; <code>yScale</code> is the scale of your drawing</li></ul><br>To use the program you must put the following functions somewhere in your code:<br><br><code id='code' style="word-break: break-all;">function svg(b,e){ctx.save();ctx.translate(e[0],e[1]);ctx.scale(e[2],e[3]);for(i=0;i&lt;b.length;i++)if("p"==b.charAt(i)){ctx.beginPath();for(var a=d(b,i),c=0;c&lt;a.length;c++)if("m"==a[c])ctx.moveTo(a[c+1],a[c+2]),c+=2;else if("l"==a[c])ctx.lineTo(a[c+1],a[c+2]),c+=2;else{ctx.closePath();parseInt(a[c])&&ctx.fill();parseInt(a[c+1])&&ctx.stroke();break}}else if("w"==b.charAt(i))ctx.lineWidth=d(b,i)[0];else if("g"==b.charAt(i))ctx.globalAlpha=d(b,i)[0];else if("s"==b.charAt(i))ctx.shadowBlur=d(b,i)[0]*Math.abs(e[2]);else if("c"==b.charAt(i)){a=d(b,i);for(c=1;c&lt;a.length;c++)a[c]=parseInt(a[c]);a[1]&&(ctx.fillStyle=a[0]);a[2]&&(ctx.strokeStyle=a[0]);a[3]&&(ctx.shadowColor=a[0]);i+=a[0].length+1}else"a"==b.charAt(i)?(a=d(b,i),ctx.beginPath(),ctx.arc(a[0],a[1],a[2],a[3]*Math.PI/180,a[4]*Math.PI/180),parseInt(a[5])&&ctx.fill(),parseInt(a[6])&&ctx.stroke()):"r"==b.charAt(i)?(a=d(b,i),ctx.beginPath(),ctx.rect(a[0],a[1],a[2],a[3]),parseInt(a[4])&&ctx.fill(),parseInt(a[5])&&ctx.stroke()):"&lt;"==b.charAt(i)?ctx.save():"&gt;"==b.charAt(i)?ctx.restore():"t"==b.charAt(i)?(a=d(b,i),ctx.translate(a[0],a[1])):"q"==b.charAt(i)&&ctx.rotate(d(b,i)*Math.PI/180);ctx.restore()}function d(b,e){return b.slice(e+2,b.indexOf(",",e+2)).split(" ")};</code><br><br><p style="text-align: center;">514 bytes gzipped (1.2KB uncompressed)</p><br><br><code>svg-data</code> has <b>11</b> possible instructions:<br><ol><li> <code>p</code> allows you to draw lines and fill or stroke them, its syntax looks like: <code>p m x y l x y... fill stroke,</code><ul><li><code>m</code> is equivalent to <code>ctx.moveTo(x,y)</code></li><li><code>l</code> is equivalent to <code>ctx.lineTo(x,y)</code></li><li><code>fill</code> &amp; <code>stroke</code> are booleans for <code>ctx.fill()</code> and <code>ctx.stroke()</code> respectively</li><li>Example: <code>"p m 0 0 l 100 0 l 50 100 l 0 0 1 1,"</code></li></ul><br></li><li><code>a</code> is equivalent to <code>ctx.arc()</code>, its syntax look like: <code>a x y radius startAngle endAngle fill stroke,</code><ul><li><code>startAngle</code> &amp; <code>endAngle</code> are in degrees</li><li><code>fill</code> &amp; <code>stroke</code> are booleans for <code>ctx.fill()</code> and <code>ctx.stroke()</code> respectively</li><li>Example: <code>"a 50 50 10 0 360 0 1,"</code></li></ul><br></li><li><code>r</code> is equivalent to <code>ctx.rect()</code>, its syntax look like: <code>a x y width height fill stroke,</code><ul><li><code>fill</code> &amp; <code>stroke</code> are booleans for <code>ctx.fill()</code> and <code>ctx.stroke()</code> respectively</li><li>Example: <code>"r 0 0 100 10 1 0,"</code></li></ul><br></li><li><code>c</code> lets you set the color, its syntax looks like: <code>c color fill stroke shadow,</code><ul><li><code>fill</code>, <code>stroke</code> &amp; <code>shadow</code> are booleans for <code>ctx.fillStyle()</code>, <code>ctx.strokeStyle</code> and <code>ctx.shadowStyle</code> respectively</li><li>color can be any html eligible format <code>#hex</code>, <code>rgba()</code>, etc.</li><li>Example: <code>"c tomato 1 1 1,"</code></li></ul><br></li><li><code>w</code> is equivalent to <code>ctx.lineWidth</code>, its syntax look like: <code>w lineWidth,</code><ul><li><code>lineWidth</code> may need to be adjusted depending on the scale you set in the <code>svg()</code> function</li><li>Example: <code>"w 10,"</code></li></ul><br></li><li><code>g</code> is equivalent to <code>ctx.globalAlpha</code>, its syntax look like: <code>g alpha,</code><ul><li>Example: <code>"g 0.8,"</code> </li></ul><br></li><li><code>s</code> is equivalent to <code>ctx.shadowBlur</code>, its syntax look like: <code>s shadowBlur,</code><ul><li>Example: <code>"s 30,"</code></li></ul><br></li><li><code>t</code> is equivalent to <code>ctx.transform()</code>, its syntax look like: <code>t x y,</code><ul><li>Example: <code>"t 100 10,"</code></li></ul><br></li><li><code>q</code> is equivalent to <code>ctx.rotate()</code>, its syntax look like: <code>q angle,</code><ul><li><code>angle</code> is in degrees</li><li>Example: <code>"q 45,"</code></li></ul><br></li><li><code>&lt;</code> is equivalent to <code>ctx.save()</code><br></li><li><code>></code> is equivalent to <code>ctx.restore()</code></li></ol><br><br>Example of full <code>svg()</code> function:<br><br><blockquote><b>important</b></blockquote><blockquote>You <b>NEED</b> to put the <code>,</code> at the end of every instruction, even the last one.</blockquote><br><code id='code'>//coffee cup<br><br>svg("c #fff 1, p m 1 5 l 4 35 l 20 35 l 23 5 1, c #000 1, r 2 0 20 2 1, c #0f0f0f 1, r 0 2 24 3 1, c #6f4e37 1, p m 1 11 l 2.5 27 l 21.5 27 l 23 11 1, c #000 1, r 5 17 5 1 1, r 11 17 3 1 1, r 10 19 7 1 1,",[10,10,5,5]);</code><br><canvas id="c"></canvas><br><p style="text-align: center;">137 bytes gzipped (219 bytes uncompressed)</p></p></div>

<script>
    let c = document.getElementById("content")
    let canvas = document.getElementById("c")
    let ctx = canvas.getContext("2d")

    function svg(b,e){ctx.save();ctx.translate(e[0],e[1]);ctx.scale(e[2],e[3]);for(i=0;i<b.length;i++)if("p"==b.charAt(i)){ctx.beginPath();for(var a=d(b,i),c=0;c<a.length;c++)if("m"==a[c])ctx.moveTo(a[c+1],a[c+2]),c+=2;else if("l"==a[c])ctx.lineTo(a[c+1],a[c+2]),c+=2;else{ctx.closePath();parseInt(a[c])&&ctx.fill();parseInt(a[c+1])&&ctx.stroke();break}}else if("w"==b.charAt(i))ctx.lineWidth=d(b,i)[0];else if("g"==b.charAt(i))ctx.globalAlpha=d(b,i)[0];else if("s"==b.charAt(i))ctx.shadowBlur=d(b,i)[0]*Math.abs(e[2]);else if("c"==b.charAt(i)){a=d(b,i);for(c=1;c<a.length;c++)a[c]=parseInt(a[c]);a[1]&&(ctx.fillStyle=a[0]);a[2]&&(ctx.strokeStyle=a[0]);a[3]&&(ctx.shadowColor=a[0]);i+=a[0].length+1}else"a"==b.charAt(i)?(a=d(b,i),ctx.beginPath(),ctx.arc(a[0],a[1],a[2],a[3]*Math.PI/180,a[4]*Math.PI/180),parseInt(a[5])&&ctx.fill(),parseInt(a[6])&&ctx.stroke()):"r"==b.charAt(i)?(a=d(b,i),ctx.beginPath(),ctx.rect(a[0],a[1],a[2],a[3]),parseInt(a[4])&&ctx.fill(),parseInt(a[5])&&ctx.stroke()):"<"==b.charAt(i)?ctx.save():">"==b.charAt(i)?ctx.restore():"t"==b.charAt(i)?(a=d(b,i),ctx.translate(a[0],a[1])):"q"==b.charAt(i)&&ctx.rotate(d(b,i)*Math.PI/180);ctx.restore()}function d(b,e){return b.slice(e+2,b.indexOf(",",e+2)).split(" ")};

    window.onresize = () => {
        canvas.width = canvas.height = c.clientWidth*0.7
        let s = Math.floor(canvas.width/50)
        svg("c #fff 1, p m 1 5 l 4 35 l 20 35 l 23 5 1, c black 1, r 2 0 20 2 1, c #0f0f0f 1, r 0 2 24 3 1, c #6f4e37 1, p m 1 11 l 2.5 27 l 21.5 27 l 23 11 1, c #000 1, r 5 17 5 1 1, r 11 17 3 1 1, r 10 19 7 1 1,", [canvas.width/2-24*s/2,canvas.height/2-35*s/2,s,s])
    }

    setTimeout(()=>{
        window.onresize()
    },10)
</script>
<style>
    canvas{
        border:1px solid black;
        margin:auto;
        display: block;
        background: tomato;
    }
#content{
        font-family: Arial, Helvetica, sans-serif;
        background: white;
        padding: 5% 5% 10% 5%;
        margin: 10% 20%;
        box-shadow: 0px 0px 20px #e6e8e9;
    }
hr{
    border: none;
    background:#f6f8fa;
    height: 2px;
}
:root {
        --fontsize: .8vw;
    }
    p{
        font-size: var(--fontsize);
        margin: 0;
        word-wrap: break-word;
        line-height: calc(var(--fontsize) + .3vw);
    }
    h1{
        font-size: calc(var(--fontsize) * 3);
        margin: 0 0 var(--fontsize) 0;
        line-height: calc(var(--fontsize) * 3 + .3vw);
    }
    h2{
        font-size: calc(var(--fontsize) * 2);
        margin: 0 0 var(--fontsize) 0;
        line-height: calc(var(--fontsize) * 2 + .3vw);
    }
    h3{
        font-size: calc(var(--fontsize) * 1.5);
        margin: 0 0 var(--fontsize) 0;
        line-height: calc(var(--fontsize) * 1.5 + .3vw);
    }
    b{
        font-weight: 700;
    }
    li{
        margin-bottom: 1%;
    }
    ul,ol{
        margin: 1% 0 0 0;
    }
    li:last-child{
        margin: 0;
    }
    code{
        background: #f6f8fa;
        padding: 2px;
    }
    #code{
        display: block;
        padding:3%;
    }
    blockquote{
        border-left: 5px solid #dfe2e5;
        margin:0;
        padding: 1% 0 1% 1em;
        color:#6a737d;
    }

</style>